<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible"
          content="IE=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"
          href="/assets/styles/index.css">
    <link rel="stylesheet"
          href="/assets/vendor/highlightjs/atelier-lakeside-light.css">
    <link rel="stylesheet"
          href="/assets/vendor/highlightjs/atom-one-dark.css">
    <script src="/assets/js/theme-changer-component.js"
            type="module"
            defer></script>
    <script src="/assets/vendor/highlightjs/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <title>Contabilidade 4 Devs</title>
</head>

<body>
    <header class="header">
        <nav class="header--navigation">
            <ul>
                <li>
                    <a href="/en-us/articles/accounting-for-developers.html"
                       lang="en-US">Read in English</a>
                </li>
                <li>
                    <a href="/pt-br">Início</a>
                </li>
            </ul>
        </nav>
        <theme-changer aria-hidden="true"
                       lang="pt-BR"></theme-changer>
        <h1>Contabilidade para Programadores</h1>
        <p class="header--article-publication-date">
            <time datetime="2022-08-30">30 de agosto de 2022</time>
        </p>
    </header>
    <main>
        <article>
            <p>Sempre tive interesse em aprender o básico de contabilidade, mas também sempre tive dificuldade em
                encontrar algum material de estudo sobre o tema que eu não achasse difícil de entender.</p>
            <p>Então, decidi escrever este artigo como uma forma de backup do que aprendi até então e também para
                compartilhar o conhecimento com quem tiver interesse.</p>
            <p>Neste artigo, não tentarei explicar nada sobre a história da contabilidade ou sua utilidade. Para tal, já
                existem diversos excelente materiais de estudo espalhados pela internet. Ao invés disso, tentarei
                utilizar uma abordagem focada em código para explicar os principas conceitos, de forma que no final do
                artigo, teremos um sistema de contabilidade minimalista e funcional.</p>
            <h2>Introdução</h2>
            <p>Empresas lidam com dinheiro. Cada país utiliza uma moeda diferente. Por isso precisamos encontrar uma
                forma de representar quantidades de dinheiro programaticamente. Para tal, utilizamos o padrão <a
                   href="https://en.wikipedia.org/wiki/ISO_4217"
                   target="_blank">ISO 4217</a>.
            </p>
            <p>Para evitar problemas com <a href="https://refactoring.guru/smells/primitive-obsession"
                   target="_blank">Primitive Obsession</a>, podemos criar uma <a
                   href="https://en.wikipedia.org/wiki/Immutable_object"
                   target="_blank">classe imutável</a> para representar um valor
                em dinheiro da seguinte forma:</p>
            <pre><code class="language-typescript codeblock">
// Typescript
// src/dinheiro.ts

export type CodigoMoeda = "BRL" | "USD";

export class Moeda {
    constructor(private _codigoIso: CodigoMoeda, private _casasDecimais: number) {}

    get codigoIso() {
        return this._codigoIso;
    }

    get casasDecimais() {
        return this._casasDecimais;
    }
}

export const Moedas = Object.freeze({
    BRL: new Moeda("BRL", 2),
    USD: new Moeda("USD", 2),
});

export class Dinheiro {
    constructor(private _valorEmCentavos: number, private _moeda: Moeda) {}

    private checarMoeda(d: Dinheiro) {
        if (this._moeda !== d._moeda) {
            throw new TypeError("Tentativa de operação com moedas diferentes");
        }
    }

    mais(d: Dinheiro) {
        this.checarMoeda(d);
        return new Dinheiro(this._valorEmCentavos + d._valorEmCentavos, this._moeda);
    }

    menos(d: Dinheiro) {
        this.checarMoeda(d);
        return new Dinheiro(this._valorEmCentavos - d._valorEmCentavos, this._moeda);
    }

    vezes(fator: number) {
        return new Dinheiro(this._valorEmCentavos * fator, this._moeda);
    }

    divididoPor(fator: number) {
        return new Dinheiro(this._valorEmCentavos / fator, this._moeda);
    }

    formatar(linguagem: string) {
        return new Intl.NumberFormat(linguagem, {
            style: "currency",
            currency: this._moeda.codigoIso,
        }).format(this._valorEmCentavos / Math.pow(10, this._moeda.casasDecimais));
    }
}

export default function dinheiro(valorEmCentavos: number, moeda: CodigoMoeda) {
    return new Dinheiro(valorEmCentavos, Moedas[moeda]);
}

// exemplo
const cemReais = dinheiro(100_00, "BRL");
const centoEVinteReais = cemReais.mais(dinheiro(20_00, "BRL"));
console.log(centoEVinteReais.formatar("pt-BR")); // R$ 120,00
            </code></pre>
            <p>Vale ressaltar que em produção, eu utilizaria uma biblioteca de terceiros para lidar com valores
                monetários, como por exemplo a <a href="https://dinerojs.com/">dinero.js</a>.</p>
            <p>Para manter as coisas simples, por enquanto utilizaremos somente o Real Brasileiro, que no padrão
                ISO 4217 é representado pelo código "BRL".</p>
            <h2>Ativos e Passivos</h2>
            <p>Toda empresa é dona de algumas coisas e deve outras coisas. Por exemplo, uma empresa pode ser dona de
                carros, de imóveis, do dinheiro que está no caixa, de marcas e patentes, etc., e também pode ter dívidas
                a pagar, salários a depositar, lucros a distribuir, etc.</p>
            <p>As coisas das quais a empresa é dona são chamadas de "Ativos", e as coisas que a empresa deve são
                chamadas de "Passivos".</p>
            <p>Os Ativos e Passivos podem ser Circulantes ou Não Circulantes:</p>
            <dl>
                <dt>Circulantes</dt>
                <dd>Coisas que vão gerar alguma movimentação de valores dentro de um prazo menor que 1 ano, são chamadas
                    "Circulantes" porque tem impacto no curto prazo. Dizemos que essas coisas possuem uma "alta
                    liquidez".</dd>
                <dt>Não Circulantes</dt>
                <dd>Coisas que não vão gerar movimentações financeiras dentro de um prazo de 1 ano são chamadas "Não
                    Circulantes", por não ter impacto no curto prazo. Dizemos que essas coisas possuem uma "baixa
                    liquidez".</dd>
            </dl>
            <p>Os Ativos também podem ser Tangíveis ou Intangíveis:</p>
            <dl>
                <dt>Ativos Tangíveis</dt>
                <dd>São os ativos que possuem existência material, como computadores e carros.</dd>
                <dt>Ativos Intangíveis</dt>
                <dd>São os ativos imateriais, como marcas e patentes.</dd>
            </dl>
            <p>Os Passivos Circulantes por sua vez podem ser Financeiros ou Operacionais:</p>
            <dl>
                <dt>Passivo Circulante Financeiro</dt>
                <dd>São os Passivos Circulantes que dizem respeito aos compromissos financeiros da empresa, como é o
                    caso de empréstimos em geral.</dd>
                <dt>Passivo Circulante Operacional</dt>
                <dd>São os Passivos Circulantes que tem relação direta com a operação do negócio, como pagamento de
                    salários, impostos mensais, etc.</dd>
            </dl>
            <pre><code  class="language-typescript codeblock">
// Typescript
// src/ativo_e_passivo.ts

import type { Dinheiro } from "./dinheiro";
import dinheiro from "./dinheiro";

export type CoisaComValorMonetario = {
    nome: string;
    valor: Dinheiro;
};

export type Ativo = CoisaComValorMonetario & {
    liquidez: Liquidez;
    tangibilidade: Tangibilidade;
};

export type Passivo = CoisaComValorMonetario & {
    liquidez: CirculanteFinanceiroOuOperacional | Liquidez.NaoCirculante;
};

export enum Tangibilidade {
    Tangivel,
    Intangivel,
}

export enum Liquidez {
    Circulante,
    NaoCirculante,
}

export enum CirculanteFinanceiroOuOperacional {
    Financeiro,
    Operacional,
}

// exemplo
const exemplosDeAtivos: Ativo[] = [
    {
        nome: "Dinheiro em caixa",
        valor: dinheiro(5_000_00, "BRL"),
        tangibilidade: Tangibilidade.Tangivel,
        liquidez: Liquidez.Circulante,
    },
    {
        nome: "Imóvel",
        valor: dinheiro(500_000_00, "BRL"),
        tangibilidade: Tangibilidade.Tangivel,
        liquidez: Liquidez.NaoCirculante,
    },
    {
        nome: "Saldo em conta bancária",
        valor: dinheiro(50_000_00, "BRL"),
        tangibilidade: Tangibilidade.Intangivel,
        liquidez: Liquidez.Circulante,
    },
    {
        nome: "Marga registrada",
        valor: dinheiro(1_000_000_00, "BRL"),
        tangibilidade: Tangibilidade.Intangivel,
        liquidez: Liquidez.NaoCirculante,
    },
];

const exemplosDePassivos: Passivo[] = [
    {
        nome: "Saldo negativo em conta bancária",
        valor: dinheiro(1000_00, "BRL"),
        liquidez: CirculanteFinanceiroOuOperacional.Financeiro,
    },
    {
        nome: "Salários do mês",
        valor: dinheiro(100_000_00, "BRL"),
        liquidez: CirculanteFinanceiroOuOperacional.Operacional,
    },
    {
        nome: "Empréstimo de longo prazo",
        valor: dinheiro(200_000_00, "BRL"),
        liquidez: Liquidez.NaoCirculante,
    },
];
            </code></pre>
            <h2>A Equação Fundamental da Contabilidade</h2>
            <p>Agora que sabemos o que é Ativo e Passivo, podemos ser apresentados ao termo "Patrimônio Líquido".</p>
            <p>O Patrimônio Líquido de uma empresa representa o valor devido aos donos e/ou acionistas, que corresponde
                à diferença entre o Ativo e o Passivo.</p>
            <p>Sabendo disso, podemos conhecer a Equação Fundamental da Contabilidade:</p>
            <p class="board">Ativo = Passivo + Patrimônio Líquido</p>
            <p>Algumas vezes podemos encontrar essa mesma conta expressa de um jeito um pouco diferente, mas que na
                verdade significa a mesma coisa: "Patrimônio Líquido = Ativo - Passivo", o que faz sentido, porque
                basicamente signica que o patrimônio de uma empresa é igual a tudo o que ela tem menos tudo o que ela
                deve.</p>
            <p>Podemos expressar isso com um pouco de código:</p>
            <pre><code class="language-typescript codeblock">
// Typescript
// src/empresa.ts

import type { Ativo, CoisaComValorMonetario, Passivo } from "./ativo_e_passivo";
import dinheiro from "./dinheiro";

export class Empresa {
    constructor(private ativos: Ativo[], private passivos: Passivo[]) {}

    private somarFatosContabeis(fatos: CoisaComValorMonetario[]) {
        return fatos.reduce((total, ativo) => {
            return total.mais(ativo.valor);
        }, dinheiro(0, "BRL"));
    }

    get valorTotalAtivos() {
        return this.somarFatosContabeis(this.ativos);
    }

    get valorTotalPassivos() {
        return this.somarFatosContabeis(this.passivos);
    }

    get valorPatrimonioLiquido() {
        return this.valorTotalAtivos.menos(this.valorTotalPassivos);
    }
}
            </code></pre>
            <p>O Patrimônio Líquido é considerado um tipo de Passivo, pois representa um valor que a empresa deve
                devolver aos seus donos/acionistas em forma de lucro ou prejuízo. No nosso código, no entanto, o
                Patrimônio Líquido não deve ser registrado no <code>array</code> de <code>Passivo[]</code>, caso
                contrário o getter <code>valorPatrimonioLiquido</code> não funcionaria. Por isso, sempre que se desejar
                saber o valor do patrimônio líquido, nesse caso, o mesmo deveria ser calculado na hora.</p>
            <h2>Fontes</h2>
            <ul>
                <li><a href="https://en.wikipedia.org/wiki/ISO_4217"
                       target="_blank">ISO 4217 (Wikipedia)</a></li>
                <li><a href="https://refactoring.guru/smells/primitive-obsession"
                       target="_blank">Primitive Obsession</a></li>
                <li><a href="https://en.wikipedia.org/wiki/Immutable_object"
                       target="_blank">Immutable Object</a></li>
                <li><a href="https://www.contabilizei.com.br/contabilidade-online/o-que-e-passivo-contabilidade/"
                       target="_blank">O que é Passivo? Contabilidade, bens e direitos nas empresas</a></li>
                <li><a href="https://docs.google.com/document/d/1HDLRa6vKpclO1JtxbGB5NeAYWf8cf1UMGy22o8OZZq4/edit"
                       target="_blank">Accounting for Developers 101</a></li>
                <li><a href="https://docs.google.com/document/d/1qhtirHUzPu7Od7yX3A4kA424tjFCv5Kbi42xj49tKlw/edit"
                       target="_blank">Accounting for Developers 102</a></li>
                <li><a href="https://pt.wikipedia.org/wiki/Equa%C3%A7%C3%A3o_cont%C3%A1bil_b%C3%A1sica"
                       target="_blank">Equação contábil básica</a></li>
                <li><a href="https://youtu.be/_c8gVi6KQnw"
                       target="_blank">Equação Fundamental do Patrimônio - Equação da Contabilidade</a></li>
                <li><a href="https://yenom.com.br/patrimonio-liquido-e-passivo/"
                       target="_blank">Patrimônio Líquido é Considerado Passivo?</a></li>
            </ul>
        </article>
    </main>
    <footer class="footer">
        <img src="/assets/images/profile-picture.jpg"
             alt="André Teixeira"
             aria-hidden="true"
             class="footer--profile-picture rounded">
        <strong>André Teixeira</strong>
        <nav class="footer--navigation">
            <ul>
                <li>
                    <a href="https://www.linkedin.com/in/andremarcondesteixeira/"
                       target="_blank"><img src="/assets/images/LI-In-Bug.png"
                             alt="LinkedIn"
                             aria-hidden="true"
                             class="footer--network-icon"></a>
                </li>
                <li>
                    <a href="https://github.com/andremarcondesteixeira"
                       target="_blank"><img src="/assets/images/GitHub-Mark-120px-plus.png"
                             alt="GitHub"
                             class="footer--network-icon hidden-in-dark-theme"><img
                             src="/assets/images/GitHub-Mark-Light-120px-plus.png"
                             alt="GitHub"
                             class="footer--network-icon hidden-in-light-theme"></a>
                </li>
            </ul>
        </nav>
    </footer>
</body>

</html>
